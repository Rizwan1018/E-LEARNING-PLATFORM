<div class="container assessment-container mt-4" *ngIf="assessment">
  
  <div class="assessment-header">
    <h1>ğŸ“ Assessment: {{ assessment.title }}</h1>
    <p class="text-muted">{{ assessment.description }}</p>
    <hr>
  </div>
  
  <div *ngFor="let q of assessment.questions; let i = index; trackBy: trackByQ" class="question-card">
    <h6>Q{{ i + 1 }}. {{ q.text }}</h6>
    
    <div class="form-check" *ngFor="let opt of q.options; let oi = index">
      <input
        class="form-check-input"
        type="radio"
        [name]="'q' + (q.id ?? i)"
        [id]="'q' + (q.id ?? i) + '_opt' + oi"
        [value]="oi"
        (change)="onAnswerSelected(q, oi)"
        [checked]="studentAnswers[q.id!] === oi"
      />
      <label class="form-check-label" [for]="'q' + (q.id ?? i) + '_opt' + oi">
        {{ opt }}
      </label>
    </div>
  </div>

  <div class="submit-btn-section">
    <button class="btn btn-primary" [disabled]="submitInFlight" (click)="submitAssessment()">
      {{ submitInFlight ? 'Submitting...' : 'Submit Assessment' }}
    </button>
  </div>
</div>

<div class="container mt-4" *ngIf="!assessment">
  Loading...
</div>