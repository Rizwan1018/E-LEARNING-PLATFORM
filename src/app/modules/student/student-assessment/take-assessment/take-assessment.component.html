
<div class="container mt-4" *ngIf="assessment">
  <h3>{{ assessment.title }}</h3>
  <p class="text-muted">{{ assessment.description }}</p>

  <div *ngFor="let q of assessment.questions; let i = index; trackBy: trackByQ" class="mb-4">
    <h6>Q{{ i + 1 }}. {{ q.text }}</h6>
    <div class="form-check" *ngFor="let opt of q.options; let oi = index">
      <input
        class="form-check-input"
        type="radio"
        [name]="'q' + (q.id ?? i)"
        [id]="'q' + (q.id ?? i) + '_opt' + oi"
        [value]="oi"
        (change)="onAnswerSelected(q, oi)"
        [checked]="studentAnswers[q.id!] === oi"
      />
      <label class="form-check-label" [for]="'q' + (q.id ?? i) + '_opt' + oi">
        {{ opt }}
      </label>
    </div>
  </div>

  <button class="btn btn-primary" [disabled]="submitInFlight" (click)="submitAssessment()">
    {{ submitInFlight ? 'Submitting...' : 'Submit Assessment' }}
  </button>
</div>

<div class="container mt-4" *ngIf="!assessment">
  Loading...
</div>
