<app-student-navbar></app-student-navbar>
<div class="container py-4">
  <div class="d-flex justify-content-between align-items-start mb-4 p-3  header">
    <div>
      <h2 class="">Welcome back, {{selectedStudentName}}</h2>
      <p class=" text-muted text">Continue your learning journey</p>
    </div>

    <div class="d-flex gap-2">
<!-- student/assessments -->

    </div>
  </div>

  <div class="row mb-4">
  <div class="col-md-4">
    <div class="card p-3 text-center">
      <div class="h3 mb-0">{{ enrolledCount }}</div>
      <div class="small text-muted">Enrolled Courses</div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="card p-3 text-center">
      <div class="h3 mb-0">{{ learningHours }}</div>
      <div class="small text-muted">Learning Hours</div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="card p-3 text-center">
      <div class="h3 mb-0">{{ averageProgress }}%</div>
      <div class="small text-muted">Average Progress</div>
    </div>
  </div>
</div>
  <br>
  <br>

  <div *ngIf="enrollments.length;" class="row g-4 p-3 cont">
    <h4>My Enrollments</h4>
    <div class="row">
  <div class="col-md-4" *ngFor="let e of enrollments | slice:0:3">
    <div class="card h-100">
      <img
        *ngIf="courseFor(e)?.thumbnail"
        [src]="'http://localhost:8080/' + courseFor(e)?.thumbnail"
        class="card-img-top"
        alt="thumbnail"
      />
      
      <div class="card-body d-flex flex-column">
        <h5 class="card-title">{{ courseFor(e)?.title }}</h5>
        <p class="small text-muted mb-2">
          {{ courseFor(e)?.domain }} • {{ courseFor(e)?.level }}
          <span *ngIf="courseFor(e)?.durationHrs"> • {{ courseFor(e)?.durationHrs }}h</span>
        </p>

        <div class="mt-auto">
          <div class="mb-2 small text-muted">
            Enrolled: {{ e.enrollmentDate }}
          </div>

          <div class="d-flex justify-content-between align-items-center">
            <span
              class="badge"
              [ngClass]="{
                'bg-success': e.status === 'completed',
                'bg-warning text-dark': e.status === 'enrolled',
                'bg-secondary': e.status === 'paused'
              }"
              >{{ e.status }}</span
            >
            <button
              class="btn btn-sm btn-primary"
              [routerLink]="['/student/player', courseFor(e)?.id]"
              [queryParams]="{ enrollmentId: e.id }"
            >
              Continue Learning
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-12 mt-4 text-center" *ngIf="enrollments?.length && enrollments.length > 3">
  <a [routerLink]="['/student/enrollments']"
              [queryParams]="{ studentId: selectedStudentId }" > 
    Show all ->
  </a>
</div>
</div>

  <ng-template #none>
    <div class="alert alert-info">No enrollments yet.</div>
  </ng-template>
</div>
